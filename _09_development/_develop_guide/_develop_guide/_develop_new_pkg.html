<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Developing a New Package &mdash; Aerostack2 1.0 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/config.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Setting Up Visual Studio Code" href="_setting_code.html" />
    <link rel="prev" title="Develop Guide" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: blue" >
            <a href="../../../index.html" class="icon icon-home"> Aerostack2
             
            <img src="https://raw.githubusercontent.com/aerostack2/aerostack2.github.io/main/docs/_images/logo.png" class="logo" alt="Logo">
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../_00_getting_started/index.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_00_getting_started/index.html#license-agreement">License agreement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_00_getting_started/index.html#previous-dependencies">Previous dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_00_getting_started/index.html#ubuntu-debian">Ubuntu (Debian)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_00_getting_started/binary_install.html">Binary Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_00_getting_started/source_install.html">Source Install</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_00_getting_started/source_install.html#previous-dependencies">Previous dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_00_getting_started/source_install.html#source-installation">Source Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_00_getting_started/source_install.html#standard-build">Standard Build</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_00_getting_started/source_install.html#build-with-as2-cli">Build with AS2 CLI</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../_01_aerostack2_concepts/index.html">Aerostack2 Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_01_aerostack2_concepts/architecture/index.html">Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_01_aerostack2_concepts/architecture/index.html#inter-process-communication">Inter-process Communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_01_aerostack2_concepts/architecture/index.html#platform-and-sensors">Platform and Sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_01_aerostack2_concepts/architecture/index.html#robotics-functions">Robotics Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_01_aerostack2_concepts/architecture/index.html#behaviors">Behaviors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_01_aerostack2_concepts/architecture/index.html#mission-control">Mission Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_01_aerostack2_concepts/architecture/index.html#applications">Applications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_01_aerostack2_concepts/as2_communications/index.html">Aerostack2 Inter-process Communication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_01_aerostack2_concepts/as2_communications/index.html#motion-references">Motion References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_01_aerostack2_concepts/as2_communications/index.html#actuator-commands">Actuator Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_01_aerostack2_concepts/as2_communications/index.html#sensor-measurements">Sensor Measurements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_01_aerostack2_concepts/as2_communications/index.html#self-localization">Self Localization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_01_aerostack2_concepts/as2_communications/index.html#emergency">Emergency</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_01_aerostack2_concepts/aerial_platforms/index.html">Aerial Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_01_aerostack2_concepts/motion_controller/index.html">Motion Controller</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_01_aerostack2_concepts/motion_controller/index.html#motion-reference-handler">Motion Reference Handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_01_aerostack2_concepts/motion_controller/index.html#control-modes">Control Modes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_01_aerostack2_concepts/motion_controller/index.html#input-control-modes">Input Control Modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_01_aerostack2_concepts/motion_controller/index.html#output-control-modes">Output Control Modes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_01_aerostack2_concepts/state_estimator/index.html">State Estimator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_01_aerostack2_concepts/behaviors/index.html">Behaviors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../_02_examples/index.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_02_examples/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_02_examples/index.html#basics-examples">Basics Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_02_examples/multirotor_simulator/index.html">Multirotor Simulator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_02_examples/multirotor_simulator/project_multirotor_simulator/index.html">Simple Multirotor Simulator Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_02_examples/gazebo/index.html">Gazebo Simulator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_02_examples/gazebo/project_gazebo/index.html">Simple Gazebo Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_02_examples/crazyflie/index.html">Bitcraze Crazyflie</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_02_examples/crazyflie/project_crazyflie/index.html">Simple Crazyflie Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_02_examples/crazyflie/project_crazyflie_gates/index.html">Crazyflie Gates Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_02_examples/tello/index.html">Ryze DJI Tello</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_02_examples/tello/project_tello/index.html">Simple Tello Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_02_examples/dji/index.html">DJI OSDK</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_02_examples/dji/project_dji_osdk/index.html">DJI OSDK Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_02_examples/pixhawk/index.html">Pixhawk 4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_02_examples/pixhawk/project_px4_vision/index.html">PX4 Vision Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../_03_aerial_platforms/index.html">Aerial Platforms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_03_aerial_platforms/_gazebo_simulation/index.html">Gazebo</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_gazebo_simulation/index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_gazebo_simulation/index.html#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_gazebo_simulation/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_gazebo_simulation/index.html#install-platform-package">Install platform package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_gazebo_simulation/index.html#install-simulation-assets">Install simulation assets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_gazebo_simulation/index.html#aerostack2-common-interface">Aerostack2 Common Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_gazebo_simulation/index.html#control-modes">Control Modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_gazebo_simulation/index.html#sensors">Sensors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_gazebo_simulation/index.html#gimbal">Gimbal</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_gazebo_simulation/index.html#config-simulation">Config Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_gazebo_simulation/index.html#platform-launch">Platform Launch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_03_aerial_platforms/_multirotor_simulator/index.html">Multirotor Simulator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_multirotor_simulator/index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_multirotor_simulator/index.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_multirotor_simulator/index.html#aerostack2-common-interface">Aerostack2 Common Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_multirotor_simulator/index.html#control-modes">Control Modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_multirotor_simulator/index.html#sensors">Sensors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_multirotor_simulator/index.html#gimbal">Gimbal</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_multirotor_simulator/index.html#config-simulation">Config Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_multirotor_simulator/index.html#platform-launch">Platform Launch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_03_aerial_platforms/_crazyflie/index.html">Bitcraze Crazyflie</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_crazyflie/index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_crazyflie/index.html#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_crazyflie/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_crazyflie/index.html#install-platform-package">Install platform package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_crazyflie/index.html#aerostack2-common-interface">Aerostack2 Common Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_crazyflie/index.html#control-modes">Control Modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_crazyflie/index.html#sensors">Sensors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_crazyflie/index.html#platform-launch">Platform Launch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_03_aerial_platforms/_ryze_tello/index.html">DJI Tello</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_ryze_tello/index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_ryze_tello/index.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_ryze_tello/index.html#aerostack2-common-interface">Aerostack2 Common Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_ryze_tello/index.html#control-modes">Control Modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_ryze_tello/index.html#sensors">Sensors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_ryze_tello/index.html#platform-launch">Platform Launch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_03_aerial_platforms/_pixhawk/index.html">Pixhawk 4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_pixhawk/index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_pixhawk/index.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_pixhawk/index.html#aerostack2-common-interface">Aerostack2 Common Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_pixhawk/index.html#control-modes">Control Modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_pixhawk/index.html#sensors">Sensors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_pixhawk/index.html#platform-launch">Platform Launch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_03_aerial_platforms/_mavlink/index.html">Mavlink</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_mavlink/index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_mavlink/index.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_mavlink/index.html#aerostack2-common-interface">Aerostack2 Common Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_mavlink/index.html#control-modes">Control Modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_mavlink/index.html#sensors">Sensors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_mavlink/index.html#platform-launch">Platform Launch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_osdk/index.html">DJI Matrice Series OSDK</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_osdk/index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_osdk/index.html#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_osdk/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_osdk/index.html#install-platform-package">Install platform package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_osdk/index.html#aerostack2-common-interface">Aerostack2 Common Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_osdk/index.html#control-modes">Control Modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_osdk/index.html#sensors">Sensors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_osdk/index.html#platform-launch">Platform Launch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_psdk/index.html">DJI Matrice Series PSDK</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_psdk/index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_psdk/index.html#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_psdk/index.html#prerequisites-to-configure-any-xavier-orin-nx-agx-board-to-connect-to-psdk-these-steps-are-only-done-once">Prerequisites to configure any Xavier/Orin NX/AGX board to connect to PSDK, These steps are only done <strong>once</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_psdk/index.html#prerequisites-to-configure-any-xavier-orin-nx-agx-board-to-connect-to-psdk-these-steps-are-only-done-every-time-the-board-boots-up">Prerequisites to configure any Xavier/Orin NX/AGX board to connect to PSDK, These steps are only done <strong>every time the board boots up</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_psdk/index.html#install-platform-package">Install platform package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_psdk/index.html#aerostack2-common-interface">Aerostack2 Common Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_psdk/index.html#control-modes">Control Modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_psdk/index.html#sensors">Sensors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_dji_psdk/index.html#platform-launch">Platform Launch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_03_aerial_platforms/_betaflight/index.html">Betaflight</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_betaflight/index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_betaflight/index.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_03_aerial_platforms/_betaflight/index.html#aerostack2-common-interface">Aerostack2 Common Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_betaflight/index.html#control-modes">Control Modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_03_aerial_platforms/_betaflight/index.html#sensors">Sensors</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../_04_robot_behaviors/index.html">Robot Behaviors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_04_robot_behaviors/index.html#motion-behaviors">Motion Behaviors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_04_robot_behaviors/index.html#perception-behaviors">Perception Behaviors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_04_robot_behaviors/index.html#trajectory-generation-behaviors">Trajectory Generation Behaviors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../_05_as2_plugins/index.html">AS2 Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_05_as2_plugins/index.html#motion-controller-plugins">Motion Controller Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_05_as2_plugins/index.html#state-estimator-plugins">State Estimator Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_05_as2_plugins/index.html#behaviors-plugins">Behaviors Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_05_as2_plugins/index.html#motion-behaviors-plugins">Motion Behaviors Plugins</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../_06_user_interfaces/index.html">User Interfaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_06_user_interfaces/_keyboard_teleoperation/index.html">Keyboard Teleoperation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_06_user_interfaces/_keyboard_teleoperation/index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_06_user_interfaces/_keyboard_teleoperation/index.html#install-dependencies">Install dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_06_user_interfaces/_keyboard_teleoperation/index.html#interface-launch">Interface launch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_06_user_interfaces/_keyboard_teleoperation/index.html#instructions">Instructions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_06_user_interfaces/_keyboard_teleoperation/index.html#interface-components">Interface Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_06_user_interfaces/_keyboard_teleoperation/index.html#settings-window">Settings window</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_06_user_interfaces/_keyboard_teleoperation/index.html#localization-window">Localization window</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_06_user_interfaces/_keyboard_teleoperation/index.html#behavior-control">Behavior control</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_06_user_interfaces/_alphanumeric_viewer/index.html">Alphanumeric Viewer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_06_user_interfaces/_alphanumeric_viewer/index.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_06_user_interfaces/_alphanumeric_viewer/index.html#interface-launch">Interface launch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_06_user_interfaces/_alphanumeric_viewer/index.html#instructions">Instructions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../_08_ros2_common_interfaces/index.html">ROS 2 Common Interfaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_08_ros2_common_interfaces/aerial_platform/index.html">Aerial Platform</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_08_ros2_common_interfaces/aerial_platform/index.html#topics">Topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_08_ros2_common_interfaces/aerial_platform/index.html#services">Services</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_08_ros2_common_interfaces/motion_controller/index.html">Motion Controller</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_08_ros2_common_interfaces/motion_controller/index.html#topics">Topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_08_ros2_common_interfaces/motion_controller/index.html#services">Services</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_08_ros2_common_interfaces/state_estimator/index.html">State Estimator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_08_ros2_common_interfaces/state_estimator/index.html#topics">Topics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_08_ros2_common_interfaces/behaviors/index.html">Behaviors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_08_ros2_common_interfaces/behaviors/index.html#actions">Actions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_08_ros2_common_interfaces/index.html#using-as2-interfaces">Using AS2 Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../_cli/index.html">Command Line Interface (CLI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../_tutorials/_tutorials/aerial_platform.html">Writing a New Aerial Platform</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/aerial_platform.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/aerial_platform.html#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/aerial_platform.html#tutorial-steps">Tutorial Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../_tutorials/_tutorials/controller_plugin.html">Writing a New Motion Controller Plugin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/controller_plugin.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/controller_plugin.html#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/controller_plugin.html#tutorial-steps">Tutorial Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../_tutorials/_tutorials/estimator_plugin.html">Writing a New State Estimator Plugin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/estimator_plugin.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/estimator_plugin.html#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/estimator_plugin.html#tutorial-steps">Tutorial Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../_tutorials/_tutorials/behavior.html">Writing a New Behavior</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/behavior.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/behavior.html#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/behavior.html#behavior-server">Behavior Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/behavior.html#behavior-client">Behavior Client</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../_tutorials/_tutorials/adding_gazebo_assets.html">Adding new Gazebo Assets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/adding_gazebo_assets.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/adding_gazebo_assets.html#adding-new-worlds">Adding New Worlds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/adding_gazebo_assets.html#adding-new-models-and-objects">Adding New Models and Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../_tutorials/_tutorials/adding_gazebo_assets.html#configuring-new-sensors">Configuring New Sensors</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Develop Guide</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Developing a New Package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#architecture-of-a-new-package">Architecture of a New Package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#code-style">Code Style</a></li>
<li class="toctree-l4"><a class="reference internal" href="#test">Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-template-for-new-packages">Node Template for New Packages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_setting_code.html">Setting Up Visual Studio Code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_setting_code.html#install-required-extensions">Install required Extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="_setting_code.html#modify-settings-json">Modify ‘settings.json’</a></li>
<li class="toctree-l4"><a class="reference internal" href="_setting_code.html#set-configuration-variables">Set Configuration Variables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="_create_gazebo_assets.html">Create New Gazebo Assets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="_create_gazebo_assets.html#create-a-new-gazebo-aerial-platform">Create a New Gazebo Aerial Platform</a></li>
<li class="toctree-l4"><a class="reference internal" href="_create_gazebo_assets.html#create-a-new-gazebo-sensor">Create a New Gazebo Sensor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../_api_documentation/index.html">API Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../_api_documentation/index.html#aerostack2">Aerostack2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_api_documentation/aerostack2/aerostack2/docs/index.html">aerostack2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../_api_documentation/index.html#python-api">Python API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../_api_documentation/temp_ws/src/as2_python_api/docs/source/index.html">as2_python_api</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../_14_projects/index.html">Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_14_projects/index.html#research">Research</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_14_projects/index.html#videos">Videos</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_14_projects/index.html#id3">Local Gaussian Modifiers (LGMs): UAV dynamic trajectory generation for onboard computation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_14_projects/index.html#id5">Framework for autonomous inspection of PV plants using IoT electronics on each PV panel and UAV collaboration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_14_projects/index.html#id7">Exploring Unstructured Environments using Minimal Sensing on Cooperative Nano-Drones</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../_14_projects/index.html#google-summer-of-code-gsoc">Google Summer of Code (GSoC)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html">Google Summer of Code (GSoC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#why-contribute">Why contribute?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#ideas-list-for-gsoc-2025">Ideas List for GSoC 2025</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#project-1-new-rviz2-rqt-plugins-for-aerostack2">Project #1: New RViz2 RQT Plugins for Aerostack2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#project-2-rqt-keyboard-teleoperation-alphanumeric-view">Project #2: RQT Keyboard Teleoperation &amp; Alphanumeric View</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#project-3-migration-of-current-ros-2-nodes-to-lifecycle-nodes-in-aerostack2">Project #3: Migration of current ROS 2 Nodes to Lifecycle Nodes in Aerostack2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#project-4-tool-for-visualizing-ros-nodes-output-log">Project #4: Tool for visualizing ROS Nodes output log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#project-5-system-integration-tests-and-continuous-integration">Project #5: System Integration Tests and Continuous Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#project-6-development-of-a-project-creation-tool-for-aerostack2">Project #6: Development of a Project Creation Tool for Aerostack2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#project-7-migration-to-ros-2-jazzy-and-gazebo-harmonic">Project #7: Migration to ROS 2 Jazzy and Gazebo Harmonic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#project-8-behavior-client-implementation-for-c">Project #8: Behavior Client Implementation for C++</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#application-instructions-for-gsoc-2025">Application instructions for GSoC 2025</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#basic-requirements">Basic Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#warm-up-task">Warm-up Task</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#application-form">Application Form</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#how-to-increase-your-chances-of-being-selected-in-gsoc-2025">How to increase your chances of being selected in GSoC-2025</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_14_projects/_gsoc/index.html#acknowledgements">Acknowledgements</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../_11_license/index.html">License Agreement: 3-Clause BSD License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../_12_citations/index.html">Citations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../_13_about_and_contact/index.html">About and Contact</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: blue" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Aerostack2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Development</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Develop Guide</a></li>
      <li class="breadcrumb-item active">Developing a New Package</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/aerostack2/aerostack2.github.io/blob/main/docs/_09_development/_develop_guide/_develop_guide/_develop_new_pkg.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="developing-a-new-package">
<span id="development-guide-new-pkg"></span><h1>Developing a New Package<a class="headerlink" href="#developing-a-new-package" title="Link to this heading"></a></h1>
<section id="architecture-of-a-new-package">
<span id="development-guide-new-pkg-architecture"></span><h2>Architecture of a New Package<a class="headerlink" href="#architecture-of-a-new-package" title="Link to this heading"></a></h2>
<section id="structure-of-a-c-package">
<h3>Structure of a C++ Package<a class="headerlink" href="#structure-of-a-c-package" title="Link to this heading"></a></h3>
<p>Every new C++ package should have the following architecture:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">package_name</span>
    <span class="o">/</span><span class="n">include</span>
        <span class="o">/</span><span class="n">package_name</span>
            <span class="c1">### header files (.hpp) ###</span>
            <span class="n">package_name</span><span class="o">.</span><span class="n">hpp</span>
            <span class="n">header_files</span><span class="o">.</span><span class="n">hpp</span>
    <span class="o">/</span><span class="n">launch</span>
    <span class="o">/</span><span class="n">src</span>
        <span class="c1">### implementation_files (.cpp)###</span>
        <span class="n">package_name</span><span class="o">.</span><span class="n">cpp</span>
        <span class="n">implementation_files</span><span class="o">.</span><span class="n">cpp</span>
        <span class="c1">### main_files (_node.cpp) ###</span>
        <span class="n">package_name_node</span><span class="o">.</span><span class="n">cpp</span>
    <span class="o">/</span><span class="n">tests</span>
        <span class="n">CMakeLists</span><span class="o">.</span><span class="n">txt</span>
        <span class="c1">### test_files (_test.cpp, _gtest.cpp) ###</span>
        <span class="n">test_executable_test</span><span class="o">.</span><span class="n">cpp</span>
        <span class="n">google_test_gtest</span><span class="o">.</span><span class="n">cpp</span>
    <span class="n">CmakeLists</span><span class="o">.</span><span class="n">txt</span>
    <span class="n">package</span><span class="o">.</span><span class="n">xml</span>
    <span class="n">README</span><span class="o">.</span><span class="n">md</span>
    <span class="n">LICENSE</span>
    <span class="n">CONTRIBUTING</span><span class="o">.</span><span class="n">md</span>
    <span class="o">.</span><span class="n">gitignore</span>
</pre></div>
</div>
<p>Note that every executable test file must end with <code class="docutils literal notranslate"><span class="pre">_test.cpp</span></code> and every Google test file must end with <code class="docutils literal notranslate"><span class="pre">_gtest.cpp</span></code>.</p>
<p>Simple packages with just one node should have its only node named as the package. Packages with more than one node or
implementation files may have different naming.</p>
</section>
<section id="structure-of-a-python-package">
<h3>Structure of a Python Package<a class="headerlink" href="#structure-of-a-python-package" title="Link to this heading"></a></h3>
<p>Every new Python package should have the following architecture:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">package_name</span>
    <span class="o">/</span><span class="n">package_name</span>
        <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
        <span class="c1">### source_files (.py) ###</span>
        <span class="n">package_name</span><span class="o">.</span><span class="n">py</span>
    <span class="o">/</span><span class="n">launch</span>
    <span class="o">/</span><span class="n">tests</span>
        <span class="c1">### test_files (test_***.py) ###</span>
        <span class="n">test_file</span><span class="o">.</span><span class="n">py</span>
    <span class="n">setup</span><span class="o">.</span><span class="n">cfg</span>
    <span class="n">setup</span><span class="o">.</span><span class="n">py</span>
    <span class="n">package</span><span class="o">.</span><span class="n">xml</span>
    <span class="n">README</span><span class="o">.</span><span class="n">md</span>
    <span class="n">LICENSE</span>
    <span class="n">CONTRIBUTING</span><span class="o">.</span><span class="n">md</span>
    <span class="o">.</span><span class="n">gitignore</span>
</pre></div>
</div>
</section>
<section id="structure-of-a-hybrid-package">
<h3>Structure of a Hybrid Package<a class="headerlink" href="#structure-of-a-hybrid-package" title="Link to this heading"></a></h3>
<p>A package that includes both Python and C++ files should have the following architecture:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">package_name</span>
    <span class="o">/</span><span class="n">package_name</span>
        <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
        <span class="c1">### python_source_files(.py) ###</span>
        <span class="n">package_name</span><span class="o">.</span><span class="n">py</span>
    <span class="o">/</span><span class="n">include</span>
        <span class="o">/</span><span class="n">package_name</span>
            <span class="c1">### C++ header files(.hpp) ###</span>
            <span class="n">package_name</span><span class="o">.</span><span class="n">hpp</span>

    <span class="o">/</span><span class="n">launch</span>
    <span class="o">/</span><span class="n">src</span>
        <span class="c1">### C++ implementation_files(.cpp) ###</span>
        <span class="n">package_name</span><span class="o">.</span><span class="n">cpp</span>
        <span class="c1">### C++ main_files (_node.cpp) ###</span>
        <span class="n">package_name_node</span><span class="p">(</span><span class="o">.</span><span class="n">cpp</span><span class="p">)</span>
    <span class="o">/</span><span class="n">tests</span>
        <span class="c1">### test_files ###</span>
        <span class="n">test_file</span><span class="o">.</span><span class="n">py</span>
    <span class="n">CMakeList</span><span class="o">.</span><span class="n">txt</span>
    <span class="n">package</span><span class="o">.</span><span class="n">xml</span>
    <span class="n">README</span><span class="o">.</span><span class="n">md</span>
    <span class="n">LICENSE</span>
    <span class="n">CONTRIBUTING</span><span class="o">.</span><span class="n">md</span>
    <span class="o">.</span><span class="n">gitignore</span>
</pre></div>
</div>
</section>
</section>
<section id="code-style">
<span id="development-guide-new-pkg-code-style"></span><h2>Code Style<a class="headerlink" href="#code-style" title="Link to this heading"></a></h2>
<p>Aerostack2 mainly follows the <a class="reference external" href="https://docs.ros.org/en/humble/The-ROS2-Project/Contributing/Code-Style-Language-Versions.html">ROS 2 code style and language versions</a>.
There are, though, some exceptions, as ROS 2 claims to follow Google code style but uses snake_case
instead of camelCase. Aerostack2 uses Google code style.</p>
<section id="c">
<span id="development-guide-new-pkg-code-style-c"></span><h3>C++<a class="headerlink" href="#c" title="Link to this heading"></a></h3>
<p>Code should follows the <a class="reference external" href="https://google.github.io/styleguide/cppguide.html">google c++ style guide</a>.</p>
<p>Every file should start with the Licence text, which looks like this:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Copyright 2024 Universidad Politécnica de Madrid</span>
<span class="c1">//</span>
<span class="c1">// Redistribution and use in source and binary forms, with or without</span>
<span class="c1">// modification, are permitted provided that the following conditions are met:</span>
<span class="c1">//</span>
<span class="c1">//    * Redistributions of source code must retain the above copyright</span>
<span class="c1">//      notice, this list of conditions and the following disclaimer.</span>
<span class="c1">//</span>
<span class="c1">//    * Redistributions in binary form must reproduce the above copyright</span>
<span class="c1">//      notice, this list of conditions and the following disclaimer in the</span>
<span class="c1">//      documentation and/or other materials provided with the distribution.</span>
<span class="c1">//</span>
<span class="c1">//    * Neither the name of the Universidad Politécnica de Madrid nor the names of its</span>
<span class="c1">//      contributors may be used to endorse or promote products derived from</span>
<span class="c1">//      this software without specific prior written permission.</span>
<span class="c1">//</span>
<span class="c1">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span>
<span class="c1">// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<span class="c1">// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<span class="c1">// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE</span>
<span class="c1">// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span>
<span class="c1">// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span>
<span class="c1">// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span>
<span class="c1">// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span>
<span class="c1">// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span>
<span class="c1">// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<span class="c1">// POSSIBILITY OF SUCH DAMAGE.</span>
</pre></div>
</div>
<p>After the License text, files should include a header like this:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm">* @file file_name.cpp</span>
<span class="cm">*</span>
<span class="cm">* File description</span>
<span class="cm">*</span>
<span class="cm">* @author Author name &lt;author email&gt;</span>
<span class="cm">*/</span>
</pre></div>
</div>
<p>Documentation will be generate using <a class="reference external" href="https://www.doxygen.nl/manual/docblocks.html">Doxygen</a>.
Therefore, header files should include a comment over every definition in order to generate the documentation properly.
The comments made in the current nodes are writing using Javadoc style.</p>
<p>Please, do not use std::cout or similar functions to show messages in command line. Instead, use logging macros like RCLCPP_INFO from ROS logging library.</p>
</section>
<section id="python">
<span id="development-guide-new-pkg-code-style-python"></span><h3>Python<a class="headerlink" href="#python" title="Link to this heading"></a></h3>
<p>Code should follow the <a class="reference external" href="https://peps.python.org/pep-0008/">PEP 8</a> and <a class="reference external" href="https://peps.python.org/pep-0257/">PEP 257</a> guidelines.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#!/usr/bin/env python3</span>

<span class="cp"># Copyright 2024 Universidad Politécnica de Madrid</span>
<span class="cp">#</span>
<span class="cp"># Redistribution and use in source and binary forms, with or without</span>
<span class="cp"># modification, are permitted provided that the following conditions are met:</span>
<span class="cp">#</span>
<span class="cp">#    * Redistributions of source code must retain the above copyright</span>
<span class="cp">#      notice, this list of conditions and the following disclaimer.</span>
<span class="cp">#</span>
<span class="cp">#    * Redistributions in binary form must reproduce the above copyright</span>
<span class="cp">#      notice, this list of conditions and the following disclaimer in the</span>
<span class="cp">#      documentation and/or other materials provided with the distribution.</span>
<span class="cp">#</span>
<span class="cp">#    * Neither the name of the Universidad Politécnica de Madrid nor the names of its</span>
<span class="cp">#      contributors may be used to endorse or promote products derived from</span>
<span class="cp">#      this software without specific prior written permission.</span>
<span class="cp">#</span>
<span class="cp"># THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span>
<span class="cp"># AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<span class="cp"># IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<span class="cp"># ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE</span>
<span class="cp"># LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span>
<span class="cp"># CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span>
<span class="cp"># SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span>
<span class="cp"># INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span>
<span class="cp"># CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span>
<span class="cp"># ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<span class="cp"># POSSIBILITY OF SUCH DAMAGE.</span>
</pre></div>
</div>
<p>After the License text, files should include a header like this:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;&quot;&quot;Module docstring.&quot;&quot;&quot;</span>

<span class="n">__authors__</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Author</span><span class="err">&#39;</span>
<span class="n">__copyright__</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Copyright</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="mi">2024</span><span class="w"> </span><span class="n">Universidad</span><span class="w"> </span><span class="n">Politécnica</span><span class="w"> </span><span class="n">de</span><span class="w"> </span><span class="n">Madrid</span><span class="err">&#39;</span>
<span class="n">__license__</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">&#39;</span><span class="n">BSD</span><span class="mi">-3</span><span class="o">-</span><span class="n">Clause</span><span class="err">&#39;</span>
<span class="n">__version__</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">&#39;</span><span class="mf">0.1.0</span><span class="err">&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="test">
<span id="development-guide-new-pkg-test"></span><h2>Test<a class="headerlink" href="#test" title="Link to this heading"></a></h2>
<p>To be used in Aerostack2, every package must pass, at least, the Code Style tests. Additional functional tests might be added to a package to provide a validation of its functionalities.</p>
<section id="code-style-test">
<span id="development-guide-new-pkg-test-style"></span><h3>Code Style Test<a class="headerlink" href="#code-style-test" title="Link to this heading"></a></h3>
<p>Aerostack2 uses <a class="reference external" href="https://github.com/ament/ament_lint">ament_lint</a> to perform style checks over the packages files.</p>
<p>For configuring style tests, this must be added on the <code class="docutils literal notranslate"><span class="pre">CMakeList.txt</span></code> of your package:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">if</span><span class="p">(</span><span class="s">BUILD_TESTING</span><span class="p">)</span>
<span class="w">    </span><span class="nb">find_package</span><span class="p">(</span><span class="s">ament_lint_auto</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="w">    </span><span class="nb">ament_lint_auto_find_test_dependencies</span><span class="p">()</span>
<span class="nb">endif</span><span class="p">()</span>
</pre></div>
</div>
<p>Also, these packages must be added to the <code class="docutils literal notranslate"><span class="pre">package.xml</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">test_depend</span><span class="o">&gt;</span><span class="n">ament_lint_auto</span><span class="o">&lt;/</span><span class="n">test_depend</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">test_depend</span><span class="o">&gt;</span><span class="n">ament_lint_common</span><span class="o">&lt;/</span><span class="n">test_depend</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The tests that are performed as part of ament_lint_common can be found <a class="reference external" href="https://github.com/ament/ament_lint/blob/humble/ament_lint_common/doc/index.rst">here</a>.</p>
<p>Some test dependencies are also required and can be installed by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt-get<span class="w"> </span>install<span class="w"> </span>python3-rosdep<span class="w"> </span>python3-pip<span class="w"> </span>python3-colcon-common-extensions<span class="w"> </span>python3-colcon-mixin<span class="w"> </span>ros-dev-tools<span class="w"> </span>-y
apt-get<span class="w"> </span>install<span class="w"> </span>python3-flake8-builtins<span class="w"> </span>python3-flake8-comprehensions<span class="w"> </span>python3-flake8-docstrings<span class="w"> </span>python3-flake8-import-order<span class="w"> </span>python3-flake8-quotes<span class="w"> </span>-y
</pre></div>
</div>
<p>The package can now be compiled running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>as2<span class="w"> </span>build<span class="w"> </span>&lt;package_name&gt;
</pre></div>
</div>
<p>And to run the tests, execute:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>as2<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-v<span class="w"> </span>&lt;package_name&gt;
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-v</span></code> flag will print all the details of the test run, including information about the tests that did not pass and the specific erros that occurred.</p>
<section id="running-individual-tests-on-cli">
<span id="development-guide-new-pkg-test-style-cli"></span><h4>Running Individual Tests on CLI<a class="headerlink" href="#running-individual-tests-on-cli" title="Link to this heading"></a></h4>
<p>Ament_lint includes a series of CLI commands with which the tests can be run separately. This might be helpful for fixing the package and eliminate the errors.
These CLI tools can be found on the folder of the specific test on the <a class="reference external" href="https://github.com/ament/ament_lint">ament_lint repository</a>.</p>
<section id="running-and-passing-ament-uncrustify">
<h5>· Running and Passing ‘ament_uncrustify’<a class="headerlink" href="#running-and-passing-ament-uncrustify" title="Link to this heading"></a></h5>
<p>The test <code class="docutils literal notranslate"><span class="pre">ament_uncrustify</span></code> can be launched by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ament_uncrustify<span class="w"> </span>--reformat<span class="w"> </span>&lt;path/to/package/directory&gt;/*
</pre></div>
</div>
<p>Or simply by running the next command from the directory of your package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ament_uncrustify<span class="w"> </span>--reformat
</pre></div>
</div>
<p>Either way, the <code class="docutils literal notranslate"><span class="pre">--reformat</span></code> flag will automatically reformat the files in which erros have been found, apart from notifying which are these files.</p>
</section>
<section id="running-and-passing-ament-copyright">
<h5>· Running and Passing ‘ament_copyright’<a class="headerlink" href="#running-and-passing-ament-copyright" title="Link to this heading"></a></h5>
<p>The test <code class="docutils literal notranslate"><span class="pre">ament_copyright</span></code> can be launched by running the next command from your package directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ament_copyright<span class="w"> </span>--add-missing<span class="w"> </span><span class="s2">&quot;Universidad Politécnica de Madrid&quot;</span><span class="w"> </span>bsd_3clause
</pre></div>
</div>
<p>The flag <code class="docutils literal notranslate"><span class="pre">--add-missing</span></code> will add the Licence text to all the files that do not include one.</p>
</section>
<section id="running-and-passing-ament-pep257">
<h5>· Running and Passing ‘ament_pep257’<a class="headerlink" href="#running-and-passing-ament-pep257" title="Link to this heading"></a></h5>
<p>The test <code class="docutils literal notranslate"><span class="pre">ament_pep257</span></code> can be launched by running the next command from your package directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ament_pep257
</pre></div>
</div>
<p>The third-party autoformatter <a class="reference external" href="https://github.com/PyCQA/docformatter">docformatter</a> can be used to help passing this test. It can be installed executing</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>docformatter
</pre></div>
</div>
<p>and launched over the <code class="docutils literal notranslate"><span class="pre">.py</span></code> files by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span>file<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>&lt;path/to/package/directory&gt;<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.py&quot;</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span>docformatter<span class="w"> </span>--in-place<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$file</span><span class="s2">&quot;</span>
<span class="k">done</span>
</pre></div>
</div>
<p>This may NOT fix all the errors, but it will eliminate some of them.</p>
</section>
<section id="running-and-passing-ament-cppcheck">
<h5>· Running and Passing ‘ament_cppcheck’<a class="headerlink" href="#running-and-passing-ament-cppcheck" title="Link to this heading"></a></h5>
<p>The test <code class="docutils literal notranslate"><span class="pre">ament_cppcheck</span></code> can be launched by running the next command from your package directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ament_cppcheck
</pre></div>
</div>
<p>You may encounter the following error when running the test alone:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cppcheck<span class="w"> </span><span class="m">2</span>.7<span class="w"> </span>has<span class="w"> </span>known<span class="w"> </span>performance<span class="w"> </span>issues<span class="w"> </span>and<span class="w"> </span>therefore<span class="w"> </span>will<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>used,<span class="w"> </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>AMENT_CPPCHECK_ALLOW_SLOW_VERSIONS<span class="w"> </span>environment<span class="w"> </span>variable<span class="w"> </span>to<span class="w"> </span>override<span class="w"> </span>this.
</pre></div>
</div>
<p>This can be fixed by setting the <code class="docutils literal notranslate"><span class="pre">AMENT_CPPCHECK_ALLOW_SLOW_VERSIONS</span></code> to whatever that evaluates to ‘True’, just as the error message indicates:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">AMENT_CPPCHECK_ALLOW_SLOW_VERSIONS</span><span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="code-functional-test">
<span id="development-guide-new-pkg-test-functional"></span><h3>Code Functional Test<a class="headerlink" href="#code-functional-test" title="Link to this heading"></a></h3>
<p>In aerostack2 we use googletest (GTest) library to perform unit tests across the packages.
GTest complete documentation about how to write your own unit tests can be found <a class="reference external" href="https://github.com/google/googletest">here</a>.`</p>
<p>To use GTest, the next line must be added to your <code class="docutils literal notranslate"><span class="pre">package.xml</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">test_depend</span><span class="o">&gt;</span><span class="n">ament_cmake_gtest</span><span class="o">&lt;/</span><span class="n">test_depend</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>In order to compile this tests some lines must be added into a <strong>NEW</strong> <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file located in a <code class="docutils literal notranslate"><span class="pre">tests/</span></code> folder.</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c"># Tests</span>
<span class="nb">file</span><span class="p">(</span><span class="s">GLOB</span><span class="w"> </span><span class="s">TEST_SOURCE</span><span class="w"> </span><span class="s2">&quot;*_test.cpp&quot;</span><span class="p">)</span>

<span class="nb">if</span><span class="p">(</span><span class="s">TEST_SOURCE</span><span class="p">)</span>
<span class="nb">foreach</span><span class="p">(</span><span class="s">TEST_FILE</span><span class="w"> </span><span class="o">${</span><span class="nv">TEST_SOURCE</span><span class="o">}</span><span class="p">)</span>
<span class="w">    </span><span class="nb">get_filename_component</span><span class="p">(</span><span class="s">TEST_NAME</span><span class="w"> </span><span class="o">${</span><span class="nv">TEST_FILE</span><span class="o">}</span><span class="w"> </span><span class="s">NAME_WE</span><span class="p">)</span>

<span class="w">    </span><span class="nb">add_executable</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">_</span><span class="o">${</span><span class="nv">TEST_NAME</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">TEST_FILE</span><span class="o">}</span><span class="p">)</span>
<span class="w">    </span><span class="nb">ament_target_dependencies</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">_</span><span class="o">${</span><span class="nv">TEST_NAME</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_DEPENDENCIES</span><span class="o">}</span><span class="p">)</span>
<span class="w">    </span><span class="nb">target_link_libraries</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">_</span><span class="o">${</span><span class="nv">TEST_NAME</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="p">)</span>
<span class="nb">endforeach</span><span class="p">()</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="c"># GTest</span>
<span class="nb">file</span><span class="p">(</span><span class="s">GLOB</span><span class="w"> </span><span class="s">GTEST_SOURCE</span><span class="w"> </span><span class="s2">&quot;*_gtest.cpp&quot;</span><span class="p">)</span>

<span class="nb">if</span><span class="p">(</span><span class="s">GTEST_SOURCE</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">ament_cmake_gtest</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>

<span class="nb">foreach</span><span class="p">(</span><span class="s">TEST_SOURCE</span><span class="w"> </span><span class="o">${</span><span class="nv">GTEST_SOURCE</span><span class="o">}</span><span class="p">)</span>
<span class="w">    </span><span class="nb">get_filename_component</span><span class="p">(</span><span class="s">TEST_NAME</span><span class="w"> </span><span class="o">${</span><span class="nv">TEST_SOURCE</span><span class="o">}</span><span class="w"> </span><span class="s">NAME_WE</span><span class="p">)</span>

<span class="w">    </span><span class="nb">ament_add_gtest</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">_</span><span class="o">${</span><span class="nv">TEST_NAME</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">TEST_SOURCE</span><span class="o">}</span><span class="p">)</span>
<span class="w">    </span><span class="nb">ament_target_dependencies</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">_</span><span class="o">${</span><span class="nv">TEST_NAME</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_DEPENDENCIES</span><span class="o">}</span><span class="p">)</span>
<span class="w">    </span><span class="nb">target_link_libraries</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">_</span><span class="o">${</span><span class="nv">TEST_NAME</span><span class="o">}</span><span class="w"> </span><span class="s">gtest_main</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="p">)</span>
<span class="nb">endforeach</span><span class="p">()</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="c"># Benchmark</span>
<span class="nb">file</span><span class="p">(</span><span class="s">GLOB</span><span class="w"> </span><span class="s">BENCHMARK_SOURCE</span><span class="w"> </span><span class="s2">&quot;*_benchmark.cpp&quot;</span><span class="p">)</span>

<span class="nb">if</span><span class="p">(</span><span class="s">BENCHMARK_SOURCE</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">benchmark</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>

<span class="nb">foreach</span><span class="p">(</span><span class="s">BENCHMARK_FILE</span><span class="w"> </span><span class="o">${</span><span class="nv">BENCHMARK_SOURCE</span><span class="o">}</span><span class="p">)</span>
<span class="w">    </span><span class="nb">get_filename_component</span><span class="p">(</span><span class="s">BENCHMARK_NAME</span><span class="w"> </span><span class="o">${</span><span class="nv">BENCHMARK_FILE</span><span class="o">}</span><span class="w"> </span><span class="s">NAME_WE</span><span class="p">)</span>

<span class="w">    </span><span class="nb">add_executable</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">_</span><span class="o">${</span><span class="nv">BENCHMARK_NAME</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">BENCHMARK_FILE</span><span class="o">}</span><span class="p">)</span>
<span class="w">    </span><span class="nb">target_link_libraries</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">_</span><span class="o">${</span><span class="nv">BENCHMARK_NAME</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="s">benchmark::benchmark</span><span class="p">)</span>
<span class="nb">endforeach</span><span class="p">()</span>
<span class="nb">endif</span><span class="p">()</span>
</pre></div>
</div>
<p>In order to link and run your functional tests alongside with the code style ones, your package’s CMakeLists.txt should follow the next structure:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c"># Set the minimum required CMake version</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.5</span><span class="p">)</span>

<span class="c"># Set the project name</span>
<span class="nb">set</span><span class="p">(</span><span class="s">PROJECT_NAME</span><span class="w"> </span><span class="s">as2_node_template</span><span class="p">)</span>
<span class="nb">project</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="p">)</span>

<span class="c"># Default to C++17 if not set</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span><span class="w"> </span><span class="s">CMAKE_CXX_STANDARD</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span><span class="w"> </span><span class="s">17</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="c"># Set Release as default build type if not set</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span><span class="w"> </span><span class="s">CMAKE_BUILD_TYPE</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_BUILD_TYPE</span><span class="w"> </span><span class="s">Release</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="c"># find dependencies</span>
<span class="nb">set</span><span class="p">(</span><span class="s">PROJECT_DEPENDENCIES</span>
<span class="s">ament_cmake</span>
<span class="s">rclcpp</span>
<span class="s">as2_core</span>
<span class="s">as2_msgs</span>
<span class="s">std_msgs</span>
<span class="p">)</span>

<span class="nb">foreach</span><span class="p">(</span><span class="s">DEPENDENCY</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_DEPENDENCIES</span><span class="o">}</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="o">${</span><span class="nv">DEPENDENCY</span><span class="o">}</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">endforeach</span><span class="p">()</span>

<span class="c"># Include necessary directories</span>
<span class="nb">include_directories</span><span class="p">(</span>
<span class="s">include</span>
<span class="s">include/</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span>
<span class="p">)</span>

<span class="c"># Set source files</span>
<span class="nb">set</span><span class="p">(</span><span class="s">SOURCE_CPP_FILES</span>
<span class="s">src/</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">_node.cpp</span>
<span class="s">src/</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">.cpp</span>
<span class="p">)</span>

<span class="c"># Create the node executable</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">_node</span><span class="w"> </span><span class="o">${</span><span class="nv">SOURCE_CPP_FILES</span><span class="o">}</span><span class="p">)</span>
<span class="nb">ament_target_dependencies</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">_node</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_DEPENDENCIES</span><span class="o">}</span><span class="p">)</span>

<span class="c"># Create the dynamic library</span>
<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_POSITION_INDEPENDENT_CODE</span><span class="w"> </span><span class="s">ON</span><span class="p">)</span>
<span class="nb">add_library</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="s">SHARED</span><span class="w"> </span><span class="o">${</span><span class="nv">SOURCE_CPP_FILES</span><span class="o">}</span><span class="p">)</span>
<span class="nb">ament_target_dependencies</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_DEPENDENCIES</span><span class="o">}</span><span class="p">)</span>

<span class="c"># Set the public include directories for the library</span>
<span class="nb">target_include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="s">PUBLIC</span>
<span class="o">$&lt;</span><span class="nv">BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include</span><span class="o">&gt;</span>
<span class="o">$&lt;</span><span class="nv">INSTALL_INTERFACE:include</span><span class="o">&gt;</span><span class="p">)</span>

<span class="c"># Install the headers</span>
<span class="nb">install</span><span class="p">(</span>
<span class="s">DIRECTORY</span><span class="w"> </span><span class="s">include/</span>
<span class="s">DESTINATION</span><span class="w"> </span><span class="s">include</span>
<span class="p">)</span>

<span class="c"># Install the node executable</span>
<span class="nb">install</span><span class="p">(</span><span class="s">TARGETS</span>
<span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">_node</span>
<span class="s">DESTINATION</span><span class="w"> </span><span class="s">lib/</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span>
<span class="p">)</span>

<span class="c"># Install the shared library</span>
<span class="nb">install</span><span class="p">(</span>
<span class="s">TARGETS</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span>
<span class="s">EXPORT</span><span class="w"> </span><span class="s">export_</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span>
<span class="s">ARCHIVE</span><span class="w"> </span><span class="s">DESTINATION</span><span class="w"> </span><span class="s">lib</span>
<span class="s">LIBRARY</span><span class="w"> </span><span class="s">DESTINATION</span><span class="w"> </span><span class="s">lib</span>
<span class="s">RUNTIME</span><span class="w"> </span><span class="s">DESTINATION</span><span class="w"> </span><span class="s">bin</span>
<span class="p">)</span>

<span class="c"># Export the libraries</span>
<span class="nb">ament_export_libraries</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="p">)</span>

<span class="c"># Export the targets</span>
<span class="nb">ament_export_targets</span><span class="p">(</span><span class="s">export_</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="p">)</span>

<span class="c"># Export the include directories</span>
<span class="nb">ament_export_include_directories</span><span class="p">(</span><span class="s">include</span><span class="p">)</span>

<span class="c"># Install the launch directory</span>
<span class="nb">install</span><span class="p">(</span><span class="s">DIRECTORY</span>
<span class="s">launch</span>
<span class="s">DESTINATION</span><span class="w"> </span><span class="s">share/</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span>
<span class="p">)</span>

<span class="c"># Install the config directory</span>
<span class="nb">install</span><span class="p">(</span><span class="s">DIRECTORY</span>
<span class="s">config</span>
<span class="s">DESTINATION</span><span class="w"> </span><span class="s">share/</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span>
<span class="p">)</span>

<span class="c"># Build tests if testing is enabled</span>
<span class="nb">if</span><span class="p">(</span><span class="s">BUILD_TESTING</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">ament_lint_auto</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">file</span><span class="p">(</span><span class="s">GLOB_RECURSE</span><span class="w"> </span><span class="s">EXCLUDE_FILES</span>
<span class="w">    </span><span class="s">build/*</span>
<span class="w">    </span><span class="s">install/*</span>
<span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">AMENT_LINT_AUTO_FILE_EXCLUDE</span><span class="w"> </span><span class="o">${</span><span class="nv">EXCLUDE_FILES</span><span class="o">}</span><span class="p">)</span>
<span class="nb">ament_lint_auto_find_test_dependencies</span><span class="p">()</span>

<span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">tests</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="c"># Create the ament package</span>
<span class="nb">ament_package</span><span class="p">()</span>
</pre></div>
</div>
<p>To run these tests:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon<span class="w"> </span><span class="nb">test</span>
</pre></div>
</div>
</section>
</section>
<section id="node-template-for-new-packages">
<h2>Node Template for New Packages<a class="headerlink" href="#node-template-for-new-packages" title="Link to this heading"></a></h2>
<p>An example node with the proper structure and all the templates can be found <a class="reference external" href="https://github.com/aerostack2/as2_node_template">here</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022-2023, Universidad Politécnica de Madrid.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>